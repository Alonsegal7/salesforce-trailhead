salesforce.ValidationRule Opportunity_Key_Information_Required_Validation {
  fullName = "Opportunity.Key_Information_Required_Validation"
  active = true
  description = "Except: Admin, Partners, Orange Bucket Opps"
  errorConditionFormula = '''
(DATEVALUE(CreatedDate)>Date(2020,04,9))
	&& ISCHANGED( StageName ) &&

or(ISPICKVAL(StageName,"Buying process"),
ISPICKVAL(StageName,"Closed Won")) 
&& 
or(isblank(Success_Metrics__c),
isblank(Risks__c))
	&&  
NOT(ISPICKVAL(Type,"Expansion"))
&& RecordType.DeveloperName = 'Internal_Opportunity'
&&  (Sale_status__c = "Expected Complete" || Sale_status__c = "Complete" ||  Green_Bucket_ARR__c >= 6000)
&&  $User.ProfileId <> '00e1t000001bu2u' 
&&  $User.ProfileId <> '00e1t000000i6Zm'
'''
  errorMessage = '''
Please fill all key information required for this stage:
• Success Metrics
• Risks
'''
  _parent = [
    salesforce.Opportunity,
  ]
}
